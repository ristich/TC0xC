import irc.bot
import re

server = 'irl.depaul.edu'
port = 6667
channel = '#dev'
nickname = 'TagBot'

class IRCBot(irc.bot.SingleServerIRCBot):
    def __init__(self):
        irc.bot.SingleServerIRCBot.__init__(self, [(server, port)], nickname, nickname)
        self.nickname = nickname

    def on_welcome(self, connection, event):
        print(f"Connected to {server}:{port}")
        connection.join(channel)
        print(f"Joined {channel}")

    def on_pubmsg(self, connection, event):
        user = event.source.nick
        message = event.arguments[0]
        self.process_message(user, message)

    def process_message(self, user, message):
        regex = r'received (\d+) points of damage from (.+)'
        match = re.match(regex, message)
        if match:
            damage_points = match.group(1)
            attacker = match.group(2)
            print(f"{user} received {damage_points} points of damage from {attacker}")

# Create an instance of the IRCBot class and start the bot
bot = IRCBot()
print(f"Connecting to {server}:{port}...")
bot.start()

